{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/tony/Desktop/App_Academy/Mern/menutube/frontend/src/components/posts/post_index_page.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { useHistory } from 'react-router-dom';\nimport { fetchPosts } from \"../../actions/post_actions\";\nimport { fetchTags } from '../../actions/tag_actions';\nimport { updateFilter, clearFilter } from '../../actions/filter_actions';\nimport { selectPosts } from '../../util/selectors';\nimport 'semantic-ui-css/semantic.min.css';\nimport { Dropdown } from 'semantic-ui-react';\nimport PostIndexItem from \"./post_index_item\";\nimport \"./post_index_page.css\";\n\nconst PostIndex = () => {\n  _s();\n\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const filter = useSelector(state => state.ui.filter);\n  const posts = useSelector(state => selectPosts(filter, state.entities.posts));\n  const diet = useSelector(state => state.entities.tags[0]);\n  const ingredients = useSelector(state => state.entities.tags[1]);\n  const nutrition = useSelector(state => state.entities.tags[2]);\n\n  const optionify = category => {\n    const options = Object.keys(category).map(tag => {\n      return {\n        key: tag,\n        text: tag[0].toUpperCase() + tag.slice(1),\n        value: tag\n      };\n    });\n    options.pop();\n    return options;\n  };\n\n  const handleFilter = (e, data) => {\n    e.preventDefault();\n    e.stopPropagation();\n    let category = data.placeholder.toLowerCase();\n    let filter = {\n      [category]: data.value\n    };\n    dispatch(updateFilter(filter));\n  };\n\n  useEffect(() => {\n    dispatch(fetchPosts());\n    dispatch(fetchTags());\n    return () => {\n      dispatch(clearFilter());\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"posts-content\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"search-bars\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"diet\",\n        children: [\" Diet/Restrictions:\", /*#__PURE__*/_jsxDEV(Dropdown, {\n          onChange: handleFilter,\n          placeholder: \"Diet\",\n          closeOnChange: true,\n          fluid: true,\n          clearable: true,\n          multiple: true,\n          search: true,\n          selection: true,\n          options: optionify(diet || {})\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"nutrition\",\n        children: [\" Nutrition:\", /*#__PURE__*/_jsxDEV(Dropdown, {\n          placeholder: \"Nutrition\",\n          closeOnChange: true,\n          fluid: true,\n          clearable: true,\n          multiple: true,\n          search: true,\n          selection: true,\n          options: optionify(nutrition || {}),\n          onChange: handleFilter\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"ingredients\",\n        children: [\" Ingredients:\", /*#__PURE__*/_jsxDEV(Dropdown, {\n          placeholder: \"Ingredients\",\n          closeOnChange: true,\n          fluid: true,\n          clearable: true,\n          multiple: true,\n          search: true,\n          selection: true,\n          options: optionify(ingredients || {}),\n          onChange: handleFilter\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => history.push('/posts/saved'),\n      children: \"Saved Posts\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"posts-list\",\n      children: posts.map(post => {\n        return /*#__PURE__*/_jsxDEV(PostIndexItem, {\n          post: post\n        }, post.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 18\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 5\n  }, this);\n};\n\n_s(PostIndex, \"r9h0NZn6SbcrMsfYi/J9wb5v34Q=\", false, function () {\n  return [useDispatch, useHistory, useSelector, useSelector, useSelector, useSelector, useSelector];\n});\n\n_c = PostIndex;\nexport default PostIndex;\n\nvar _c;\n\n$RefreshReg$(_c, \"PostIndex\");","map":{"version":3,"sources":["/Users/tony/Desktop/App_Academy/Mern/menutube/frontend/src/components/posts/post_index_page.jsx"],"names":["React","useEffect","useState","useSelector","useDispatch","useHistory","fetchPosts","fetchTags","updateFilter","clearFilter","selectPosts","Dropdown","PostIndexItem","PostIndex","dispatch","history","filter","state","ui","posts","entities","diet","tags","ingredients","nutrition","optionify","category","options","Object","keys","map","tag","key","text","toUpperCase","slice","value","pop","handleFilter","e","data","preventDefault","stopPropagation","placeholder","toLowerCase","push","post","id"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useSelector, useDispatch} from \"react-redux\";\nimport {useHistory} from 'react-router-dom';\nimport { fetchPosts } from \"../../actions/post_actions\";\nimport { fetchTags } from '../../actions/tag_actions';\nimport { updateFilter, clearFilter } from '../../actions/filter_actions';\nimport { selectPosts } from '../../util/selectors';\nimport 'semantic-ui-css/semantic.min.css'\nimport { Dropdown } from 'semantic-ui-react';\nimport PostIndexItem from \"./post_index_item\";\nimport \"./post_index_page.css\";\n\nconst PostIndex = () => {\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const filter = useSelector((state) => state.ui.filter);\n\n  const posts = useSelector((state) => selectPosts(filter, state.entities.posts));\n  \n  const diet = useSelector((state) => state.entities.tags[0]);\n  const ingredients = useSelector((state) => state.entities.tags[1]);\n  const nutrition = useSelector((state) => state.entities.tags[2]);\n  \n  \n  const optionify = (category) => {\n    const options = Object.keys(category).map(tag => {\n      return {key: tag, text: tag[0].toUpperCase() + tag.slice(1), value: tag}\n    })\n    options.pop();\n    return options\n  }\n\n  const handleFilter = (e, data) => {\n    e.preventDefault();\n    e.stopPropagation();\n    let category = data.placeholder.toLowerCase()\n    let filter = {[category]: data.value}\n    dispatch(updateFilter(filter))\n  }\n\n  useEffect(() => {\n    dispatch(fetchPosts())\n    dispatch(fetchTags())\n\n    return () => {\n      dispatch(clearFilter())\n    }\n  }, []);\n  \n  return (\n    <div className=\"posts-content\">\n      <div className=\"search-bars\">\n      <label className=\"diet\"> Diet/Restrictions: \n        <Dropdown \n          onChange={handleFilter}\n          placeholder='Diet'\n          closeOnChange\n          fluid\n          clearable\n          multiple\n          search\n          selection\n          options={optionify(diet || {})}\n          \n        />\n      </label>\n      <label className=\"nutrition\"> Nutrition: \n        <Dropdown \n          placeholder='Nutrition'\n          closeOnChange\n          fluid\n          clearable\n          multiple\n          search\n          selection\n          options={optionify(nutrition || {})}\n          onChange={handleFilter}\n        />\n      </label>\n      <label className=\"ingredients\"> Ingredients: \n        <Dropdown \n          placeholder='Ingredients'\n          closeOnChange\n          fluid\n          clearable\n          multiple\n          search\n          selection\n          options={optionify(ingredients || {})}\n          onChange={handleFilter}\n        />\n      </label>\n      </div>\n      <button onClick={() => history.push('/posts/saved')}>Saved Posts</button>\n      <ul className=\"posts-list\">\n        {posts.map((post) => {\n          return <PostIndexItem post={post} key={post.id} />\n        })}\n      </ul>\n    </div>\n  );\n};\n\nexport default PostIndex;\n"]},"metadata":{},"sourceType":"module"}