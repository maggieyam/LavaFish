{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/tony/Desktop/App_Academy/Mern/menutube/frontend/src/components/posts/post_show.jsx\";\nimport React, { Component } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport ReactPlayer from \"react-player/file\";\nimport \"./post_show.css\";\nimport Comments from '../comments/comments';\nimport { Link } from 'react-router-dom';\nimport DraggableVideo from \"../calendar/draggablevideo\";\n\nclass PostShow extends Component {\n  constructor(props) {\n    super(props);\n    this.vidRef = /*#__PURE__*/React.createRef();\n    this.state = {\n      commentBody: \"\"\n    };\n    this.jumpToTime = this.jumpToTime.bind(this);\n    this.goToEditPage = this.goToEditPage.bind(this);\n    this.findTags = this.findTags.bind(this);\n  }\n\n  componentDidMount() {\n    this.props.fetchPost(this.props.match.params.id);\n  }\n\n  formatSeconds(secs) {\n    let remainingSecs = secs % 60;\n    let remainingMins = Math.floor(secs / 60);\n\n    if (remainingSecs < 10) {\n      remainingSecs = \"0\" + remainingSecs;\n    }\n\n    return `${remainingMins}:${remainingSecs}`;\n  }\n\n  jumpToTime(secs) {\n    if (this.vidRef.current) {\n      this.vidRef.current.seekTo(secs);\n    }\n  }\n\n  findTags() {\n    let {\n      diet,\n      nutrition,\n      ingredients\n    } = this.props.post;\n    diet = Object.keys(diet).filter(tag => tag !== \"_id\" && diet[tag]).map(tag => [tag, \"diet\"]);\n    nutrition = Object.keys(nutrition).filter(tag => tag !== \"_id\" && nutrition[tag]).map(tag => [tag, \"nutrition\"]);\n    ingredients = Object.keys(ingredients).filter(tag => tag !== \"_id\" && ingredients[tag]).map(tag => [tag, \"ingredients\"]);\n    return [...diet, ...nutrition, ...ingredients];\n  }\n\n  goToSearchTag(tag) {\n    this.props.updateFilter({\n      [tag[1]]: [tag[0]]\n    });\n    this.props.history.push('/feed');\n  }\n\n  goToEditPage() {\n    this.props.history.push(`/edit/${this.props.match.params.id}`);\n  }\n\n  goToFeed() {\n    this.props.history.push(`/feed`);\n  }\n\n  render() {\n    const {\n      post,\n      deletePost,\n      currentUser,\n      createComment,\n      deleteComment\n    } = this.props;\n    if (!post) return null;\n    this.tags = this.tags || this.findTags();\n    const instructionList = post.steps.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      id: \"no-instructions-message\",\n      children: currentUser === post.user._id ? \"Why not hit that edit button and give your viewers some instructions?\" : \"The uploader hasn't uploaded any instructions yet.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this) : post.steps.map(({\n      timestamp,\n      description\n    }, idx) => /*#__PURE__*/_jsxDEV(\"li\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"instructions\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => this.jumpToTime(timestamp),\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: this.formatSeconds(timestamp)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this)\n    }, idx, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this));\n    const tagsList = this.tags.map((tag, idx) => /*#__PURE__*/_jsxDEV(\"li\", {\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"tag-button\",\n        onClick: () => this.goToSearchTag(tag),\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: `#${tag[0]}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this)\n    }, idx, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this));\n    const postButtons = currentUser !== post.user._id ? null : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"post-buttons\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: this.goToEditPage,\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Edit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => deletePost(post._id).then(this.goToFeed()),\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"post-show-wrapper\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"post-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"video-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"left-side-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"show-title\",\n              children: post.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"by \", post.user.username]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 114,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 13\n          }, this), postButtons]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"middle-show-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"show-video-container\",\n            children: /*#__PURE__*/_jsxDEV(DraggableVideo, {\n              id: this.props.post._id,\n              contents: /*#__PURE__*/_jsxDEV(ReactPlayer, {\n                ref: this.vidRef,\n                url: post.url,\n                controls: true,\n                height: \"inherit\",\n                width: \"inherit\",\n                config: {\n                  file: {\n                    attributes: {\n                      controlsList: [\"nodownload\"],\n                      disablePictureInPicture: true\n                    }\n                  }\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 123,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"instructions-section\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"instructions-header\",\n              children: \"Instructions\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"instructions-body\",\n              children: /*#__PURE__*/_jsxDEV(\"ul\", {\n                children: instructionList\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 144,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"tags-section\",\n          children: /*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"tags-list\",\n            children: tagsList\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Comments, {\n          post: post,\n          createComment: createComment,\n          currentUser: currentUser,\n          deleteComment: deleteComment\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default _c = withRouter(PostShow);\n\nvar _c;\n\n$RefreshReg$(_c, \"%default%\");","map":{"version":3,"sources":["/Users/tony/Desktop/App_Academy/Mern/menutube/frontend/src/components/posts/post_show.jsx"],"names":["React","Component","withRouter","ReactPlayer","Comments","Link","DraggableVideo","PostShow","constructor","props","vidRef","createRef","state","commentBody","jumpToTime","bind","goToEditPage","findTags","componentDidMount","fetchPost","match","params","id","formatSeconds","secs","remainingSecs","remainingMins","Math","floor","current","seekTo","diet","nutrition","ingredients","post","Object","keys","filter","tag","map","goToSearchTag","updateFilter","history","push","goToFeed","render","deletePost","currentUser","createComment","deleteComment","tags","instructionList","steps","length","user","_id","timestamp","description","idx","tagsList","postButtons","then","title","username","url","file","attributes","controlsList","disablePictureInPicture"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport ReactPlayer from \"react-player/file\";\nimport \"./post_show.css\";\nimport Comments from '../comments/comments';\nimport {Link} from 'react-router-dom';\nimport DraggableVideo from \"../calendar/draggablevideo\";\n\nclass PostShow extends Component {\n  constructor(props) {\n    super(props);\n\n    this.vidRef = React.createRef();\n    this.state = {commentBody: \"\"}\n\n    this.jumpToTime = this.jumpToTime.bind(this);\n    this.goToEditPage = this.goToEditPage.bind(this);\n    this.findTags = this.findTags.bind(this);\n  }\n\n  componentDidMount() {\n    this.props.fetchPost(this.props.match.params.id);\n  }\n\n  formatSeconds(secs) {\n    let remainingSecs = secs % 60;\n    let remainingMins = Math.floor(secs / 60);\n    if (remainingSecs < 10) {\n      remainingSecs = \"0\" + remainingSecs;\n    }\n    return `${remainingMins}:${remainingSecs}`;\n  }\n\n  jumpToTime(secs) {\n    if (this.vidRef.current) {\n      this.vidRef.current.seekTo(secs);\n    }\n  }\n\n  findTags(){\n    let {diet, nutrition, ingredients} = this.props.post;\n    diet = Object.keys(diet).filter(tag => tag !== \"_id\" && diet[tag]).map(tag => [tag, \"diet\"])\n    nutrition = Object.keys(nutrition).filter(tag => tag !== \"_id\" && nutrition[tag]).map(tag => [tag, \"nutrition\"])\n    ingredients = Object.keys(ingredients).filter(tag => tag !== \"_id\" && ingredients[tag]).map(tag => [tag, \"ingredients\"])\n    return [...diet, ...nutrition, ...ingredients];\n  }\n\n  goToSearchTag(tag) {\n    this.props.updateFilter({[tag[1]]: [tag[0]]})\n    this.props.history.push('/feed')\n  }\n\n  goToEditPage() {\n    this.props.history.push(`/edit/${this.props.match.params.id}`);\n  }\n\n  goToFeed() {\n    this.props.history.push(`/feed`)\n  }\n\n\n  render() {\n    const { post, deletePost, currentUser, createComment, deleteComment } = this.props;\n    \n    if (!post) return null;\n    \n    this.tags = this.tags || this.findTags();\n\n    const instructionList = post.steps.length === 0 ? (\n      <p id=\"no-instructions-message\">\n        {currentUser === post.user._id ?\n        \"Why not hit that edit button and give your viewers some instructions?\" :\n        \"The uploader hasn't uploaded any instructions yet.\"}\n      </p>\n    ) : post.steps.map(({timestamp, description}, idx) => (\n      <li key={idx}>\n        <div className=\"instructions\">\n          <button onClick={() => this.jumpToTime(timestamp)}>\n            <p>{this.formatSeconds(timestamp)}</p>\n          </button>\n          <p>{description}</p>\n        </div>\n      </li>\n    ));\n    const tagsList = this.tags.map((tag, idx) => (\n      <li key={idx}>\n        <button className=\"tag-button\" onClick={() => this.goToSearchTag(tag)}>\n          <p>{`#${tag[0]}`}</p>\n        </button>\n      </li>\n    ));\n    const postButtons = currentUser !== post.user._id ? null : (\n      <div className=\"post-buttons\">\n        <button onClick={this.goToEditPage}>\n          <p>Edit</p>\n        </button>\n        <button onClick={() => deletePost(post._id).then(this.goToFeed())}>\n          <p>Delete</p>\n        </button>\n      </div>\n    );\n\n    return (\n      <div className=\"post-show-wrapper\">\n        <div className=\"post-container\">\n          <div className=\"video-header\">\n            <div className=\"left-side-header\">\n              <p className=\"show-title\">{post.title}</p>\n              {/* <p>by <Link\n                className='profile-link'\n                to={`/profile/${post.user._id}`}\n              >{post.user.username}</Link>\n              </p> */}\n              <p>by {post.user.username}</p>\n            </div>\n            {postButtons}\n          </div>\n          <div className=\"middle-show-section\">\n            <div className=\"show-video-container\">\n              <DraggableVideo\n                id = {this.props.post._id}\n                contents = {\n                  <ReactPlayer\n                    ref={this.vidRef}\n                    url={post.url}\n                    controls\n                    height={\"inherit\"}\n                    width={\"inherit\"}\n                    config={{\n                      file: {\n                        attributes: {\n                          controlsList: [\"nodownload\"],\n                          disablePictureInPicture: true,\n                        },\n                      },\n                    }}\n                  />\n                }\n              />\n            </div>\n            <div className=\"instructions-section\">\n              <p className=\"instructions-header\">Instructions</p>\n              <div className=\"instructions-body\">\n                <ul>{instructionList}</ul>\n              </div>\n            </div>\n          </div>\n          <div className=\"tags-section\">\n            <ul className=\"tags-list\">{tagsList}</ul>\n          </div>\n          <Comments\n            post={post}\n            createComment={createComment}\n            currentUser={currentUser}\n            deleteComment={deleteComment}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withRouter(PostShow);\n"]},"metadata":{},"sourceType":"module"}